<div ng-switch="view">
  <div ng-switch-when="date">
    <table>
      <thead>
      <tr>
        <th ng-mouseup="prev()">&lsaquo;</th>
        <th colspan="5" class="switch" ng-mouseup="setView('month')" ng-bind="date|mFormat:'YYYY MMMM':tz"></th>
        <th ng-mouseup="next()">&rsaquo;</i></th>
      </tr>
      <tr>
        <th ng-repeat="day in weekdays" style="overflow: hidden" ng-bind="day|mFormat:'ddd':tz"></th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="week in weeks" ng-init="$index2 = $index">
        <td ng-repeat="day in week">
          <span
            ng-class="classes[$index2][$index]"
            ng-mouseup="selectDate(day)" ng-bind="day|mFormat:'DD':tz"></span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div ng-switch-when="year">
    <table>
      <thead>
      <tr>
        <th ng-mouseup="prev(10)">&lsaquo;</th>
        <th colspan="5" class="switch"ng-bind="years[0].year()+' - '+years[years.length-1].year()"></th>
        <th ng-mouseup="next(10)">&rsaquo;</i></th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td colspan="7">
          <span ng-class="classes[$index]"
                ng-repeat="year in years"
                ng-mouseup="selectDate(year)" ng-bind="year.year()"></span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div ng-switch-when="month">
    <table>
      <thead>
      <tr>
        <th ng-mouseup="prev()">&lsaquo;</th>
        <th colspan="5" class="switch" ng-mouseup="setView('year')" ng-bind="date|mFormat:'YYYY':tz"></th>
        <th ng-mouseup="next()">&rsaquo;</i></th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td colspan="7">
          <span ng-repeat="month in months"
                ng-class="classes[$index]"
                ng-mouseup="selectDate(month)"
                ng-bind="month|mFormat:'MMM':tz"></span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div ng-switch-when="hours">
    <table>
      <thead>
      <tr>
        <th ng-mouseup="prev(24)">&lsaquo;</th>
        <th colspan="5" class="switch" ng-mouseup="setView('date')" ng-bind="date|mFormat:'DD MMMM YYYY':tz"></th>
        <th ng-mouseup="next(24)">&rsaquo;</i></th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td colspan="7">
          <span ng-repeat="hour in hours"
                ng-class="classes[$index]"
                ng-mouseup="selectDate(hour)" ng-bind="hour|mFormat:'HH:mm':tz"></span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div ng-switch-when="minutes">
    <table>
      <thead>
      <tr>
        <th ng-mouseup="prev()">&lsaquo;</th>
        <th colspan="5" class="switch" ng-mouseup="setView('hours')" ng-bind="date|mFormat:'DD MMMM YYYY':tz"></th>
        <th ng-mouseup="next()">&rsaquo;</i></th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td colspan="7">
          <span ng-repeat="minute in minutes"
                ng-class="classes[$index]"
                ng-mouseup="selectDate(minute)"
                ng-bind="minute|mFormat:'HH:mm':tz"></span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>